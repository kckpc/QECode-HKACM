(this["webpackJsonpqr-checkin-app"]=this["webpackJsonpqr-checkin-app"]||[]).push([[0],{23:function(e,t,c){"use strict";c.r(t);var s=c(3),a=c.n(s),n=c(10),i=c.n(n),r=c(11),l=c(25),d=c(1);function o(e){let{participants:t}=e;return Object(d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:j,children:"ID"}),Object(d.jsx)("th",{style:j,children:"Chinese Name"}),Object(d.jsx)("th",{style:j,children:"English Name"}),Object(d.jsx)("th",{style:j,children:"Email"}),Object(d.jsx)("th",{style:j,children:"Voice"}),Object(d.jsx)("th",{style:j,children:"Status"})]})}),Object(d.jsx)("tbody",{children:t.map((e=>Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:p,children:e.id}),Object(d.jsx)("td",{style:p,children:e.name}),Object(d.jsx)("td",{style:p,children:e.ename}),Object(d.jsx)("td",{style:p,children:e.email}),Object(d.jsx)("td",{style:p,children:e.voice}),Object(d.jsx)("td",{style:p,children:e.isValid?"Valid":"Invalid"})]},e.id)))})]})}const j={backgroundColor:"#f2f2f2",padding:"10px",borderBottom:"1px solid #ddd",textAlign:"left"},p={padding:"10px",borderBottom:"1px solid #ddd"};var h=function(){const[e,t]=Object(s.useState)(""),[c,a]=Object(s.useState)(""),[n,i]=Object(s.useState)(null),[j,p]=Object(s.useState)(""),[h,b]=Object(s.useState)(!1),[u,x]=Object(s.useState)(null),[O,m]=Object(s.useState)(""),[y,g]=Object(s.useState)([]),[f,S]=Object(s.useState)(null),[v,k]=Object(s.useState)(!1),[C,w]=Object(s.useState)(0),[E,I]=Object(s.useState)(!1),[A,D]=Object(s.useState)("");Object(s.useEffect)((()=>{N()}),[]);const N=async()=>{try{const e=await l.a.get("http://localhost:3001/api/participants");g(e.data),S(null)}catch(e){S("Failed to fetch participants. Please try again later."),console.error("Error fetching participants:",e)}},V=async e=>{b(!0),t(e),p("Checking...");try{const t=(new Date).toISOString(),c=await l.a.post("http://localhost:3001/api/check-in",{qrData:e,checkInTime:t});c.data.participant?(i(c.data.participant),p(c.data.message),k(c.data.multipleCheckIns),w(c.data.checkInCount||0),N()):(i(null),p(c.data.message),k(!1),w(0)),S(null)}catch(c){p("Error checking participant"),i(null),k(!1),w(0),l.a.isAxiosError(c)&&c.response?S(`Error: ${c.response.status} - ${c.response.data.message}`):S("An unexpected error occurred")}finally{b(!1)}};return Object(d.jsxs)("div",{className:"App",style:{padding:"20px"},children:[Object(d.jsx)("h1",{children:"QR Code Check-in"}),f&&Object(d.jsx)("div",{style:{color:"red",marginBottom:"20px"},children:f}),Object(d.jsx)("div",{style:{width:"300px",margin:"auto"},children:Object(d.jsx)(r.a,{onResult:async e=>{e&&await V(e.text)},constraints:{facingMode:"environment"}})}),Object(d.jsxs)("p",{children:["Scanned Code: ",e]}),Object(d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c.trim()&&(await V(c),a(""))},children:[Object(d.jsx)("input",{type:"text",value:c,onChange:e=>{a(e.target.value)},placeholder:"Enter participant ID manually"}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]}),Object(d.jsxs)("p",{children:["Status: ",j]}),h&&Object(d.jsx)("p",{children:"Loading..."}),n&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Participant Found:"}),Object(d.jsxs)("p",{children:["ID: ",e]}),Object(d.jsxs)("p",{children:["Chinese Name: ",n.name||"Not provided"]}),Object(d.jsxs)("p",{children:["English Name: ",n.ename||"Not provided"]}),Object(d.jsxs)("p",{children:["Email: ",n.email||"Not provided"]}),Object(d.jsxs)("p",{children:["Voice: ",n.voice||"Not provided"]}),Object(d.jsxs)("p",{children:["Status: ",n.isValid?"Valid":"Invalid"]}),v&&Object(d.jsxs)("p",{style:{color:"orange",fontWeight:"bold"},children:["Warning: This is check-in number ",C," today for this participant."]}),Object(d.jsx)("h3",{children:"Check-in History:"}),Object(d.jsx)("ul",{children:n.checkIns&&n.checkIns.map(((e,t)=>Object(d.jsx)("li",{children:new Date(e).toLocaleString()},t)))})]}),E?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(d.jsx)("h2",{children:"Admin Section"}),Object(d.jsx)("button",{onClick:()=>{I(!1),D("")},style:{backgroundColor:"orange",color:"white"},children:"Lock"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Update Participants"}),Object(d.jsx)("input",{type:"file",onChange:e=>{e.target.files&&x(e.target.files[0])},accept:".xlsx, .xls"}),Object(d.jsx)("button",{onClick:async()=>{if(!u)return void m("No file selected");const e=new FormData;e.append("file",u);try{await l.a.post("http://localhost:3001/api/upload-participants",e,{headers:{"Content-Type":"multipart/form-data"}}),m("Participants updated successfully"),N(),S(null)}catch(t){m("Error uploading file"),l.a.isAxiosError(t)&&t.response?S(`Error: ${t.response.status} - ${t.response.data}`):S("An unexpected error occurred during file upload")}},children:"Upload"}),Object(d.jsx)("button",{onClick:async()=>{try{await l.a.post("http://localhost:3001/api/clear-participants"),m("All participant data cleared successfully"),g([]),S(null)}catch(e){m("Error clearing participant data"),l.a.isAxiosError(e)&&e.response?S(`Error: ${e.response.status} - ${e.response.data}`):S("An unexpected error occurred while clearing data")}},style:{marginLeft:"10px",backgroundColor:"red",color:"white"},children:"Clear All Data"}),Object(d.jsx)("p",{children:O})]}),Object(d.jsx)("h3",{children:"Participant List"}),Object(d.jsx)(o,{participants:y})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Admin Blocked"}),Object(d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"hkacmstaffadmin"===A?I(!0):S("Incorrect password")},children:[Object(d.jsx)("input",{type:"password",value:A,onChange:e=>{D(e.target.value)},placeholder:"Enter password"}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})]})]})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d14b6ef2.chunk.js.map